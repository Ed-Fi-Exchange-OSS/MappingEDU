<!--
SPDX-License-Identifier: Apache-2.0
Licensed to the Ed-Fi Alliance under one or more agreements.
The Ed-Fi Alliance licenses this file to you under the Apache License, Version 2.0.
See the LICENSE and NOTICES files in the project root for more information.
-->

<ma-loading view-model="enumerationDetailsViewModel"></ma-loading>
<div ma-handle-errors error-data="enumerationDetailsViewModel.errorData">
</div>
<br />
<div class="section-header clearfix">
    <div class="title collapsed" data-toggle="collapse" data-target="#enumerationDetails"
         ng-click="enumerationDetailsViewModel.toggleEnumerationItemsCaret()">
        <div class="toggle-icon fa fa-2x"
             ng-class="{'fa-caret-down': enumerationDetailsViewModel.showEnumerationItems,
                    'fa-caret-right': !enumerationDetailsViewModel.showEnumerationItems}">
        </div>
        <div class="toggle-text">
            Enumeration Items
        </div>
    </div>
</div>
<hr />
<div id="enumerationDetails" class="collapse in">
    <table class="table table-striped table-bordered" datatable="ng">
        <thead>
            <tr>
                <th>Code Value</th>
                <th>Short Description</th>
                <th>Description</th>
                <th class="text-center" ng-if="!enumerationDetailsViewModel.enumeration.isMappingProject">Edit</th>
                <th class="text-center" ng-if="!enumerationDetailsViewModel.enumeration.isMappingProject">Delete</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="item in enumerationDetailsViewModel.enumeration.EnumerationItems">
                <td ng-bind="item.CodeValue"></td>
                <td ng-bind="item.ShortDescription"></td>
                <td ng-bind="item.Description"></td>
                <td class="text-center" ng-if="!enumerationDetailsViewModel.enumeration.isMappingProject">
                    <a class="btn btn-edit" ng-click="enumerationDetailsViewModel.edit(item)" data-toggle="modal"
                       data-target="#editEnumerationItemModal" data-backdrop="static" data-keyboard="false">
                        <i class="fa"></i>
                    </a>
                </td>
                <td class="text-center" ng-if="!enumerationDetailsViewModel.enumeration.isMappingProject">
                    <button type="button" class="btn btn-delete"
                            ma-confirm-action="enumerationDetailsViewModel.delete(item)">
                        <i class="fa"></i>
                    </button>
                </td>
            </tr>
        </tbody>
    </table>
    <div class="row" ng-if="!enumerationDetailsViewModel.enumeration.isMappingProject">
        <div class="col-md-12">
            <a class="btn btn-add btn-happy pull-right" ng-click="enumerationDetailsViewModel.add()"
               data-toggle="modal" data-target="#editEnumerationItemModal" data-backdrop="static" data-keyboard="false">
                <i class="fa"></i>Add
            </a>
        </div>
    </div>
</div>
<div id="editEnumerationItemModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <span class="page-title">
                    Edit Enumeration Item
                </span>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div ma-handle-errors error-data="errorData"> </div>
                    <form name="enumerationForm"
                          ng-submit="enumerationDetailsViewModel.save(enumerationDetailsViewModel.enumerationItemEdit)"
                          novalidate>
                        <div class="col-md-12 form-group" ma-show-errors>
                            <label>Code Value</label>
                            <input name="codeValue" type="text" value="" placeholder="Code" class="form-control"
                                   ng-model="enumerationDetailsViewModel.enumerationItemEdit.CodeValue"
                                   required ng-maxlength="1024" />
                            <div ng-messages="enumerationForm.codeValue.$error" class="help-block">
                                <div ng-message="required">Code Value is required.</div>
                                <div ng-message="maxlength">Code Value is too long.</div>
                            </div>
                        </div>
                        <div class="col-md-12 form-group" ma-show-errors>
                            <label>Short Description</label>
                            <input name="shortDescription" type="text" value="" placeholder="Short Description" class="form-control"
                                   ng-model="enumerationDetailsViewModel.enumerationItemEdit.ShortDescription"
                                   ng-maxlength="1024">
                            <div ng-messages="enumerationForm.shortDescription.$error" class="help-block">
                                <div ng-message="maxlength">Short Description is too long.</div>
                            </div>
                        </div>
                        <div class="col-md-12 form-group" ma-show-errors>
                            <label>Description</label>
                            <input name="description" type="text" value="" placeholder="Description" class="form-control"
                                   ng-model="enumerationDetailsViewModel.enumerationItemEdit.Description"
                                   ng-maxlength="1024">
                            <div ng-messages="enumerationForm.description.$error" class="help-block">
                                <div ng-message="maxlength">Description is too long.</div>
                            </div>
                        </div>
                        <div class="col-md-12 btn-toolbar">
                            <div class="pull-right">
                                <button type="button" class="btn btn-cancel" ng-click="enumerationDetailsViewModel.cancel()">
                                    <i class="fa"></i>
                                    Cancel
                                </button>
                                <button type="submit" class="btn btn-happy">
                                    <i class="fa"></i>
                                    Save
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
